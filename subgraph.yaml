# Do not edit subgraph.yaml,this is a generated file.
# Instead, edit subgraph.template.yaml and run `yarn manifest-<network>-[staging]`
specVersion: 0.0.2
description: A template for Garden metric subgraph
repository: https://github.com/0xGabi/gardens-metrics
schema:
  file: ./schema.graphql
dataSources:
# Organizations
  # Kernel
  - kind: ethereum/contract
    name: Kernel
    network: rinkeby
    source:
      abi: Kernel
      address: '0x7777cd7c9c6d3537244871ac8e73b3cb9710d45a'
      startBlock: 7887667
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: ConvictionVoting
          file: ./abis/ConvictionVoting.json
        - name: HookedTokenManager
          file: ./abis/HookedTokenManager.json
        - name: Kernel
          file: ./abis/Kernel.json  
        - name: ERC20
          file: ./abis/ERC20.json   
      eventHandlers:
        - event: NewAppProxy(address,bool,bytes32)
          handler: handleNewAppProxy
      file: ./src/mappings/Kernel.ts
# /Organizations
# Organization templates
  # OrganizationTemplate
  - kind: ethereum/contract
    name: GardensTemplate
    network: rinkeby
    source:
      abi: GardensTemplate
      address: '0xE1B043996132c2285Ee298a878F2C20DCdB9E3AA'
      startBlock: 8650058
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: GardensTemplate
          file: ./abis/GardensTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DeployDao(address)
          handler: handleDeployDao
        - event: SetupDao(address)
          handler: handleSetupDao
        - event: DeployToken(address)
          handler: handleDeployToken
        - event: InstalledApp(address,bytes32)
          handler: handleInstalledApp
        - event: GardenTransactionTwo(address,address,address)
          handler: handleGardenTransactionTwo
      file: ./src/mappings/GardensTemplate.ts
  # OrganizationTemplate
  - kind: ethereum/contract
    name: GardensTemplateWithPermit
    network: rinkeby
    source:
      abi: GardensTemplate
      address: '0x5580958AA6E3b79650250A07134DF005965e1b67'
      startBlock: 8724398
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: GardensTemplate
          file: ./abis/GardensTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DeployDao(address)
          handler: handleDeployDao
        - event: SetupDao(address)
          handler: handleSetupDao
        - event: DeployToken(address)
          handler: handleDeployToken
        - event: InstalledApp(address,bytes32)
          handler: handleInstalledApp
        - event: GardenTransactionTwo(address,address,address)
          handler: handleGardenTransactionTwo
      file: ./src/mappings/GardensTemplate.ts
  # OrganizationTemplate
  - kind: ethereum/contract
    name: GardensTemplateWithPermit2
    network: rinkeby
    source:
      abi: GardensTemplate
      address: '0x2427F0f1B842665d9FB9f0d8Ca347E044Ef5F15a'
      startBlock: 9102279
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: GardensTemplate
          file: ./abis/GardensTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DeployDao(address)
          handler: handleDeployDao
        - event: SetupDao(address)
          handler: handleSetupDao
        - event: DeployToken(address)
          handler: handleDeployToken
        - event: InstalledApp(address,bytes32)
          handler: handleInstalledApp
        - event: GardenTransactionTwo(address,address,address)
          handler: handleGardenTransactionTwo
      file: ./src/mappings/GardensTemplate.ts
  # OrganizationTemplate
  - kind: ethereum/contract
    name: GardensTemplateWithGnosisSafe
    network: rinkeby
    source:
      abi: GardensTemplate
      address: '0xa8e6c20e8ad85836c8ee7b6c8decae75967b580e'
      startBlock: 9463579
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: GardensTemplate
          file: ./abis/GardensTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DeployDao(address)
          handler: handleDeployDao
        - event: SetupDao(address)
          handler: handleSetupDao
        - event: DeployToken(address)
          handler: handleDeployToken
        - event: InstalledApp(address,bytes32)
          handler: handleInstalledApp
        - event: GardenTransactionTwo(address,address,address)
          handler: handleGardenTransactionTwo
      file: ./src/mappings/GardensTemplate.ts
  # OrganizationTemplate
  - kind: ethereum/contract
    name: GardensTemplateWithModVoting
    network: rinkeby
    source:
      abi: GardensTemplate
      address: '0xA28c03923385e31E506e749e64Ce4CfC14d93459'
      startBlock: 9589595
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: GardensTemplate
          file: ./abis/GardensTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DeployDao(address)
          handler: handleDeployDao
        - event: SetupDao(address)
          handler: handleSetupDao
        - event: DeployToken(address)
          handler: handleDeployToken
        - event: InstalledApp(address,bytes32)
          handler: handleInstalledApp
        - event: GardenTransactionTwo(address,address,address)
          handler: handleGardenTransactionTwo
      file: ./src/mappings/GardensTemplate.ts
  # OrganizationTemplate
  - kind: ethereum/contract
    name: GardensTemplateWithWrappedRole
    network: rinkeby
    source:
      abi: GardensTemplate
      address: '0xF8A030177865356E2Be8fb5F95a19962E6b57E3e'
      startBlock: 9668429
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: GardensTemplate
          file: ./abis/GardensTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DeployDao(address)
          handler: handleDeployDao
        - event: SetupDao(address)
          handler: handleSetupDao
        - event: DeployToken(address)
          handler: handleDeployToken
        - event: InstalledApp(address,bytes32)
          handler: handleInstalledApp
        - event: GardenTransactionTwo(address,address,address)
          handler: handleGardenTransactionTwo
      file: ./src/mappings/GardensTemplate.ts
  # OrganizationTemplate
  - kind: ethereum/contract
    name: GardensTemplateWithWrappedRoleFixedApproved
    network: rinkeby
    source:
      abi: GardensTemplate
      address: '0x832a29b1d6c1dfca7075c62d222b40c05183aaae'
      startBlock: 10007376
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - NoEnt
      abis:
        - name: GardensTemplate
          file: ./abis/GardensTemplate.json
        - name: Kernel
          file: ./abis/Kernel.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: DeployDao(address)
          handler: handleDeployDao
        - event: SetupDao(address)
          handler: handleSetupDao
        - event: DeployToken(address)
          handler: handleDeployToken
        - event: InstalledApp(address,bytes32)
          handler: handleInstalledApp
        - event: GardenTransactionTwo(address,address,address)
          handler: handleGardenTransactionTwo
      file: ./src/mappings/GardensTemplate.ts
# /Organization templates
templates:
- kind: ethereum/contract
  name: ConvictionVoting
  network: rinkeby
  source:
    abi: ConvictionVoting
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.5
    language: wasm/assemblyscript
    entities:
      - Garden
      - Outflow
      - Token
    abis:
      - name: ConvictionVoting
        file: ./abis/ConvictionVoting.json
      - name: ERC20
        file: ./abis/ERC20.json
    eventHandlers:
      - event: ProposalAdded(indexed address,indexed uint256,indexed uint256,string,bytes,uint256,bool,address)
        handler: handleProposalAdded
      - event: ProposalExecuted(indexed uint256,uint256)
        handler: handleProposalExecuted
      - event: ContractPaused(bool)
        handler: handleContractPaused
    file: ./src/mappings/ConvictionVoting.ts
- kind: ethereum/contract
  name: HookedTokenManager
  network: rinkeby
  source:
    abi: HookedTokenManager
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.5
    language: wasm/assemblyscript
    entities:
      - Token
    abis:
      - name: HookedTokenManager
        file: ./abis/HookedTokenManager.json
      - name: ERC20
        file: ./abis/ERC20.json
    eventHandlers:
      - event: TokenManagerInitialized(address,address)
        handler: handleTokenManagerInitialized
    file: ./src/mappings/HookedTokenManager.ts
# Kernel
- kind: ethereum/contract
  name: Kernel
  network: rinkeby
  source:
    abi: Kernel
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.5
    language: wasm/assemblyscript
    entities:
      - NoEnt
    abis:
      - name: ConvictionVoting
        file: ./abis/ConvictionVoting.json
      - name: HookedTokenManager
        file: ./abis/HookedTokenManager.json
      - name: Kernel
        file: ./abis/Kernel.json  
      - name: ERC20
        file: ./abis/ERC20.json   
    eventHandlers:
      - event: NewAppProxy(address,bool,bytes32)
        handler: handleNewAppProxy
    file: ./src/mappings/Kernel.ts
